<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuckyDragon Casino - æ¨èå¥½å‹</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/lobby.css">
    <link rel="stylesheet" href="css/account.css">
</head>

<body>
    <div class="bg-animated"></div>

    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="container nav-content">
            <a href="lobby.html" class="logo">
                <span class="logo-icon">ğŸ‰</span>
                <span class="logo-text">LuckyDragon</span>
            </a>
            <div class="nav-center">
                <div class="wallet-display">
                    <span class="wallet-icon">ğŸ’°</span>
                    <span class="wallet-amount" id="navBalance">$0</span>
                </div>
            </div>
            <div class="nav-right">
                <a href="account.html" class="btn btn-sm btn-outline">è¿”å›è´¦æˆ·</a>
            </div>
        </div>
    </nav>

    <!-- Referral Page -->
    <div class="referral-page">
        <div class="container">
            <!-- Referral Banner -->
            <div class="referral-banner glass-card">
                <div class="banner-content">
                    <h1>ğŸ‘¥ é‚€è¯·å¥½å‹ï¼ŒåŒåŒå¾—åˆ©ï¼</h1>
                    <p>æ¯æˆåŠŸé‚€è¯·ä¸€ä½å¥½å‹ï¼Œæ‚¨å¯è·å¾— <strong class="text-gold">$100</strong> å¥–åŠ±</p>
                    <p>å¥½å‹é¦–å­˜åå³å¯è·å¾— <strong class="text-gold">$50</strong> å½©é‡‘</p>
                </div>
            </div>

            <div class="referral-layout">
                <!-- Referral Link -->
                <div class="referral-link-section glass-card">
                    <h3>ğŸ”— æ‚¨çš„ä¸“å±æ¨èé“¾æ¥</h3>
                    <div class="link-box">
                        <input type="text" class="input-field" id="referralLink" readonly value="">
                        <button class="btn btn-gold" onclick="copyLink()">å¤åˆ¶é“¾æ¥</button>
                    </div>
                    <div class="share-buttons">
                        <button class="share-btn whatsapp" onclick="shareWhatsApp()">
                            ğŸ“± WhatsApp
                        </button>
                        <button class="share-btn telegram" onclick="shareTelegram()">
                            âœˆï¸ Telegram
                        </button>
                        <button class="share-btn wechat" onclick="shareWeChat()">
                            ğŸ’¬ å¾®ä¿¡
                        </button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="referral-stats glass-card">
                    <h3>ğŸ“Š æ¨èç»Ÿè®¡</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalReferrals">0</div>
                            <div class="stat-label">æ€»é‚€è¯·äººæ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="successReferrals">0</div>
                            <div class="stat-label">æˆåŠŸæ³¨å†Œ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value text-gold" id="totalEarnings">$0</div>
                            <div class="stat-label">ç´¯è®¡å¥–åŠ±</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- How it works -->
            <div class="how-it-works glass-card">
                <h3>ğŸ“‹ æ¨èæµç¨‹</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-num">1</div>
                        <div class="step-icon">ğŸ”—</div>
                        <div class="step-text">å¤åˆ¶æ‚¨çš„ä¸“å±æ¨èé“¾æ¥</div>
                    </div>
                    <div class="step-arrow">â†’</div>
                    <div class="step">
                        <div class="step-num">2</div>
                        <div class="step-icon">ğŸ“¤</div>
                        <div class="step-text">åˆ†äº«ç»™å¥½å‹</div>
                    </div>
                    <div class="step-arrow">â†’</div>
                    <div class="step">
                        <div class="step-num">3</div>
                        <div class="step-icon">âœ…</div>
                        <div class="step-text">å¥½å‹æ³¨å†Œå¹¶é¦–å­˜</div>
                    </div>
                    <div class="step-arrow">â†’</div>
                    <div class="step">
                        <div class="step-num">4</div>
                        <div class="step-icon">ğŸ’°</div>
                        <div class="step-text">åŒæ–¹è·å¾—å¥–åŠ±ï¼</div>
                    </div>
                </div>
            </div>

            <!-- Referral History -->
            <div class="referral-history glass-card">
                <h3>ğŸ‘¥ é‚€è¯·è®°å½•</h3>
                <div class="history-table-container">
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>ç”¨æˆ·å</th>
                                <th>æ³¨å†Œæ—¶é—´</th>
                                <th>çŠ¶æ€</th>
                                <th>å¥–åŠ±</th>
                            </tr>
                        </thead>
                        <tbody id="referralHistory">
                            <tr>
                                <td colspan="4" class="empty-state">æš‚æ— é‚€è¯·è®°å½•ï¼Œå¿«å»åˆ†äº«é“¾æ¥å§ï¼</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <style>
        .referral-page {
            padding: 30px 0;
            min-height: calc(100vh - 80px);
        }

        .referral-banner {
            padding: 50px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(220, 20, 60, 0.1));
            margin-bottom: 30px;
        }

        .referral-banner h1 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .referral-banner p {
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .referral-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .referral-link-section,
        .referral-stats {
            padding: 30px;
        }

        .referral-link-section h3,
        .referral-stats h3,
        .how-it-works h3,
        .referral-history h3 {
            margin-bottom: 25px;
        }

        .link-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .link-box .input-field {
            flex: 1;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
        }

        .share-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .share-btn.whatsapp {
            background: #25D366;
            color: #fff;
        }

        .share-btn.telegram {
            background: #0088cc;
            color: #fff;
        }

        .share-btn.wechat {
            background: #07C160;
            color: #fff;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .how-it-works {
            padding: 30px;
            margin-bottom: 25px;
        }

        .steps {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .step {
            text-align: center;
            padding: 25px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            min-width: 150px;
            position: relative;
        }

        .step-num {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 25px;
            background: var(--color-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            color: #000;
        }

        .step-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .step-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .step-arrow {
            font-size: 1.5rem;
            color: var(--color-gold);
        }

        .referral-history {
            padding: 30px;
        }

        .history-table-container {
            overflow-x: auto;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }

        @media (max-width: 768px) {
            .referral-layout {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .steps {
                flex-direction: column;
            }

            .step-arrow {
                transform: rotate(90deg);
            }

            .share-buttons {
                flex-direction: column;
            }
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>


    <script src="js/supabase-config.js"></script>


    <script src="js/auth.js"></script>
    <script>
        async function initPage() {
            const user = await Auth.getCurrentUser();
            if (!user) {
                window.location.href = 'index.html';
                return;
            }

            document.getElementById('navBalance').textContent = '$' + parseFloat(user.balance || 0).toLocaleString();

            // Generate referral link
            const referralCode = user.id.substring(0, 8);
            const baseUrl = window.location.origin;
            document.getElementById('referralLink').value = `${baseUrl}/index.html?ref=${referralCode}`;
        }

        function copyLink() {
            const input = document.getElementById('referralLink');
            input.select();
            document.execCommand('copy');
            Auth.showNotification('âœ… é“¾æ¥å·²å¤åˆ¶ï¼', 'success');
        }

        function shareWhatsApp() {
            const link = document.getElementById('referralLink').value;
            const text = 'ğŸ‰ åŠ å…¥ LuckyDragon Casinoï¼Œè·å¾— $10,000 ä½“éªŒé‡‘ï¼ä½¿ç”¨æˆ‘çš„é“¾æ¥æ³¨å†Œè¿˜èƒ½è·å¾—é¢å¤– $50 å½©é‡‘ï¼';
            window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + link)}`, '_blank');
        }

        function shareTelegram() {
            const link = document.getElementById('referralLink').value;
            const text = 'ğŸ‰ åŠ å…¥ LuckyDragon Casinoï¼';
            window.open(`https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent(text)}`, '_blank');
        }

        function shareWeChat() {
            Auth.showNotification('è¯·æ‰“å¼€å¾®ä¿¡æ‰«æäºŒç»´ç åˆ†äº«', 'info');
        }

        document.addEventListener('DOMContentLoaded', initPage);
    </script>
    <script src="js/footer.js"></script>
</body>

</html>